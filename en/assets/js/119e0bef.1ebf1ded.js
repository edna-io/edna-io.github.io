"use strict";(self.webpackChunkedna_docs=self.webpackChunkedna_docs||[]).push([["32019"],{36783:function(e,i,n){n.r(i),n.d(i,{frontMatter:()=>o,toc:()=>a,default:()=>h,metadata:()=>t,assets:()=>l,contentTitle:()=>d});var t=JSON.parse('{"id":"getting-started/methods","title":"Methods and Properties","description":"Methods","source":"@site/i18n/en/docusaurus-plugin-content-docs-ios/version-4.39.0/getting-started/methods.md","sourceDirName":"getting-started","slug":"/getting-started/methods","permalink":"/en/ios/4.39.0/getting-started/methods","draft":false,"unlisted":false,"tags":[],"version":"4.39.0","lastUpdatedAt":1751633423000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"mainSidebar","previous":{"title":"Configuring Notifications","permalink":"/en/ios/4.39.0/getting-started/notifications"},"next":{"title":"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438","permalink":"/en/ios/4.39.0/category/\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u044B\u0435-\u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}}'),s=n(85893),r=n(50065);let o={sidebar_position:6},d="Methods and Properties",l={},a=[{value:"Methods",id:"methods",level:2},{value:"Integration",id:"integration",level:3},{value:"Methods of Registration and Processing Notifications",id:"methods-of-registration-and-processing-notifications",level:3},{value:"Working with Clients",id:"working-with-clients",level:3},{value:"Creating Chat Screen",id:"creating-chat-screen",level:3},{value:"Tools",id:"tools",level:3},{value:"Programmed Message Sending",id:"programmed-message-sending",level:3},{value:"ThreadsDelegate",id:"threadsdelegate",level:3},{value:"Properties",id:"properties",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Client",id:"client",level:3},{value:"State",id:"state",level:3}];function c(e){let i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"methods-and-properties",children:"Methods and Properties"})}),"\n",(0,s.jsx)(i.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(i.h3,{id:"integration",children:"Integration"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void)configureTransportProtocolWithDelegate:(id<ThreadsDelegate> _Nullable)delegate webSocketURL:(NSURL *)webSocketURL providerUid:(NSString *)providerUid historyURL:(NSURL *)historyURL fileUploadingURL:(NSURL *)fileUploadingURL"}),"\xa0- Initial configuration of\xa0",(0,s.jsx)(i.code,{children:"Threads"}),"\xa0with a web socket transport protocol, it needs to be called in AppDelegate. The parameters are as follows:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"delegate"}),"\xa0- Threads delegate. Usually, it's AppDelegate."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"webSocketURL"}),"\xa0- Web socket URL"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"providerUid"}),"\xa0- App identifier"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"historyURL"}),"\xa0- URL of history loading"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"fileUploadingURL"}),"\xa0- URL of uploading files"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void)configureWithDelegate:(id<ThreadsDelegate> _Nullable)delegate productionMFMSServer:(BOOL)productionMFMSServer historyURL:(NSURL *)historyURL fileUploadingURL:(NSURL *)fileUploadingURL"}),"\xa0-"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void)registerApplicationForRemoteNotificationsStandartOptionsWithAuthorizationStatusDenied:(void (^)(void))authorizationStatusDenied completionHandler:(THRRemoteNotificationsRegistrationCompletion _Nonnull)completionHandler"}),"\xa0- App registration on the APNS server. The parameters are as follows:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"authorizationStatusDenied"}),"\xa0- The block that processes it when users choose to refuse receiving push notifications."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"completionHandler"}),"\xa0- App registration completion block on the APNS server."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"methods-of-registration-and-processing-notifications",children:"Methods of Registration and Processing Notifications"}),"\n",(0,s.jsx)(i.p,{children:"Following are methods of registration and processing notifications, they must be only called in the respective methods of AppDelegate."}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-swift",children:"- (void)applicationDidRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings;\n- (void)applicationDidRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken;\n"})}),"\n",(0,s.jsx)(i.h3,{id:"working-with-clients",children:"Working with Clients"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void)setClientWithId:(NSString *)id name:(NSString * _Nullable)name appMarker:(NSString * _Nullable)appMarker signature:(NSString *)signature;"}),"\xa0- Configuring a client","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"id"}),"\xa0- Unique client ID. This parameter is required."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"name"}),"\xa0- Client's name. This parameter is optional."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"appMarker"}),"\xa0- Chat identifier. This parameter is optional, it must be only used for multi-chat. Any unique string can be used as APP_MARKER. APP_MARKER must be the same for the corresponding Android and iOS apps."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"signature"}),"\xa0-  Authorization signature clientId. Currently, this parameter is optional, verification is enabled on the Threads server. The signature must be generated on your authorization server based on clientId using the RSA private key, then encrypted in Base64. For the general scheme of working with the signature, refer to the backend documentation."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void) logout"}),"\xa0- Log out the current client - the app will stop receiving messages for this client.\xa0",(0,s.jsx)(i.strong,{children:"Important"}),": Upon\xa0",(0,s.jsx)(i.code,{children:"clientId"}),"\xa0change, automatic logout is not executed."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void) logout: (NSString*) clientId"}),"\xa0- Log out a client with a specific identifier."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"creating-chat-screen",children:"Creating Chat Screen"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(UIViewController *)chatViewControllerWithAttributes:(THRAttributes *)attributes"}),"\xa0- Creates the chat's ",(0,s.jsx)(i.code,{children:"viewController"})," with specified attributes."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(UIViewController *)chatViewControllerWithAttributes:(THRAttributes *)attributes completionHandler:(THROperationCompletion _Nullable)completionHandler"}),"\xa0- Creates the chat's ",(0,s.jsx)(i.code,{children:"viewController"}),"\xa0with specified attributes and the chat initialization success handler."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"tools",children:"Tools"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(NSString *) version"}),"\xa0- Returns the version of the Threads library"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void) clearCachedFiles"}),"\xa0- Clears the local image cache"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(BOOL) isThreadsOriginPushUserInfo:(NSDictionary *)userInfo"}),"\xa0- Verifies whether the push notification belongs to",(0,s.jsx)(i.code,{children:"Threads"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(NSString *) getAppMarkerFromPushUserInfo:(NSDictionary *)userInfo"}),"\xa0- Extracts ",(0,s.jsx)(i.code,{children:"APP_MARKER"}),"\xa0from the push notification"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"programmed-message-sending",children:"Programmed Message Sending"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void)sendMessageWithText:(NSString *)text completion:(nullable THROperationCompletion)completion"}),"\xa0- Sends a test message"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void)sendMessageWithImage:(UIImage *)image completion:(nullable THROperationCompletion)completion"}),"\xa0- Sends an image"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"threadsdelegate",children:"ThreadsDelegate"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void)threads:(Threads *)threads unreadMessagesCount:(NSUInteger)unreadMessagesCount"}),"\xa0- Receives the number of unread messages."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void)threads:(Threads *)threads didReceiveError:(NSError *)error"}),"\xa0- Receives\xa0",(0,s.jsx)(i.code,{children:"Threads"})," bug log."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"(void)threads:(Threads *)threads didChangeDeviceAddress:(NSString *)deviceAddress;"}),"\xa0- Sends a notification about the change of ",(0,s.jsx)(i.code,{children:"deviceAddress"})," including when it's first received after the successful registration on push notifications."]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"properties",children:"Properties"}),"\n",(0,s.jsx)(i.h3,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"id <ThreadsDelegate> delegate"}),"\xa0- Threads delegate. Usually, it's AppDelegate."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"BOOL isClientIdEncrypted"}),"\xa0- Flag indicating that ",(0,s.jsx)(i.code,{children:"CLIENT_ID"}),"\xa0is passed encrypted."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"BOOL isShowsNetworkActivity"}),"\xa0- Parameter for showing network activity in the status bar."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"NSInteger fileSizeLimit"}),"\xa0- Size limitations (in bytes) for files to upload."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"THRAttributes *attributes"}),"\xa0- Chat behavior and display settings. See\xa0",(0,s.jsx)(i.a,{href:"/i18n/en/docusaurus-plugin-content-docs-ios/current/advanced/ui",children:"documentation"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"client",children:"Client"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"NSString *clientId"}),"\xa0- Current set ",(0,s.jsx)(i.code,{children:"CLIENT_ID"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"NSString *clientName"}),"\xa0- Name of the current client."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"NSString *appMarker"}),"\xa0- App marker. It is used to connect several apps to the same server or implement several chats in the same app."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"NSString *clientSignature"}),"\xa0- Authorization signature\xa0",(0,s.jsx)(i.code,{children:"CLIENT_ID"}),". The signature must be generated on your authorization server based on clientId using the RSA private key, then encrypted in Base64."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"NSString *data"}),"\xa0- JSON string with custom client data. The following parameters will be displayed in general client info:\xa0",(0,s.jsx)(i.code,{children:"name"}),",\xa0",(0,s.jsx)(i.code,{children:"phone"}),",\xa0",(0,s.jsx)(i.code,{children:"email"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Example:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'    {\n      "name": "Name Surname",\n      "phone": "+7-999-999-99-99",\n      "email": "e@mail.com",\n      "customField":"customValue"\n    }\n'})}),"\n",(0,s.jsx)(i.h3,{id:"state",children:"State"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"BOOL isClientSet"}),"\xa0- The parameter that indicates whether the client is specified in the chat."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"NSInteger unreadMessagesCount"}),"\xa0- Number of unread messages."]}),"\n"]})]})}function h(e={}){let{wrapper:i}={...(0,r.a)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},50065:function(e,i,n){n.d(i,{Z:()=>d,a:()=>o});var t=n(67294);let s={},r=t.createContext(s);function o(e){let i=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:i},e.children)}}}]);