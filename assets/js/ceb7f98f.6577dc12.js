"use strict";(self.webpackChunkedna_docs=self.webpackChunkedna_docs||[]).push([["44611"],{48617:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>s,toc:()=>d,default:()=>h,metadata:()=>t,assets:()=>c,contentTitle:()=>a});var t=JSON.parse('{"id":"getting-started/notifications","title":"\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F","description":"\u0414\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u043F\u0443\u0448 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0438\u0442\u044C \u0438\u0445 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0443 \u043D\u0430 \u043D\u0430\u0448\u0435\u043C \u0441\u0435\u0440\u0432\u0435\u0440\u0435. \u0414\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u043E\u0439 \u0438\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0438\u0438 \u043D\u0430\u043F\u0438\u0448\u0438\u0442\u0435 \u043D\u0430 support@edna.ru.","source":"@site/ios_versioned_docs/version-5.1.0/getting-started/notifications.md","sourceDirName":"getting-started","slug":"/getting-started/notifications","permalink":"/ios/5.1.0/getting-started/notifications","draft":false,"unlisted":false,"tags":[],"version":"5.1.0","lastUpdatedAt":1758216681000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"mainSidebar","previous":{"title":"\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0447\u0430\u0442\u0430","permalink":"/ios/5.1.0/getting-started/open_chat"},"next":{"title":"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438","permalink":"/ios/5.1.0/category/\u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}}'),o=i(85893),r=i(50065);let s={sidebar_position:5},a="\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",c={},d=[{value:"\u041F\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0442\u043E\u043A\u0435\u043D\u0430",id:"\u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0430-\u0442\u043E\u043A\u0435\u043D\u0430",level:2},{value:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F",id:"\u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430-\u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F",level:2},{value:"\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043F\u0443\u0448\u0435\u0439",id:"\u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0430-\u043F\u0443\u0448\u0435\u0439",level:2},{value:"<code>static func isChatCenterNotification(_ userInfo: [String: Any]) -&gt; Bool</code>",id:"static-func-ischatcenternotification_-userinfo-string-any---bool",level:4},{value:"\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u043F\u043E \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044E",id:"\u043F\u0435\u0440\u0435\u0445\u043E\u0434-\u043F\u043E-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044E",level:2},{value:"<code>func handleNotification(userInfo: [String: Any]) throws</code>",id:"func-handlenotificationuserinfo-string-any-throws",level:4}];function l(n){let e={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F",children:"\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F"})}),"\n",(0,o.jsxs)(e.p,{children:["\u0414\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u043F\u0443\u0448 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0438\u0442\u044C \u0438\u0445 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0443 \u043D\u0430 \u043D\u0430\u0448\u0435\u043C \u0441\u0435\u0440\u0432\u0435\u0440\u0435. \u0414\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u043E\u0439 \u0438\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0438\u0438 \u043D\u0430\u043F\u0438\u0448\u0438\u0442\u0435 \u043D\u0430 ",(0,o.jsx)(e.a,{href:"mailto:support@edna.ru",children:"support@edna.ru"}),"."]}),"\n",(0,o.jsx)(e.h2,{id:"\u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0430-\u0442\u043E\u043A\u0435\u043D\u0430",children:"\u041F\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0442\u043E\u043A\u0435\u043D\u0430"}),"\n",(0,o.jsx)(e.p,{children:"\u0412 SDK \u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u043F\u0435\u0440\u0435\u0434\u0430\u0442\u044C \u0438\u0437 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u0442\u043E\u043A\u0435\u043D \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430:"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.em,{children:"\u041C\u043E\u0436\u043D\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0434\u043E \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440\u0430 ChatCenterUISDK"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-swift",children:"func application(_ application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data) {\n    ChatCenterUISDK.setDeviceToken(deviceToken)\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430-\u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F",children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F"}),"\n",(0,o.jsx)(e.p,{children:"\u0412 \u0441\u043B\u0443\u0447\u0430\u0435 \u0435\u0441\u043B\u0438 \u043F\u0443\u0448\u0438 \u0432 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0434\u043E \u044D\u0442\u043E\u0433\u043E \u043D\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043B\u0438\u0441\u044C, \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u043F\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u043D\u0430\u0441\u0442\u0440\u043E\u0438\u0442\u044C \u0438\u0445 \u0432 \u0432\u0430\u0448\u0435\u043C \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0435 Apple \u0438 \u0441\u0430\u043C\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438."}),"\n",(0,o.jsxs)(e.admonition,{type:"note",children:[(0,o.jsxs)(e.p,{children:["\u0414\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B ",(0,o.jsx)(e.code,{children:"didRegisterForRemoteNotificationsWithDeviceToken"})," \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C \u0437\u0430\u043F\u0440\u043E\u0441 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0439 \u043D\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439 \u0432 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438:"]}),(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-swift",children:"UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .sound]) { granted, _ in\n            guard granted else {\n                return\n            }\n\n            UNUserNotificationCenter.current().getNotificationSettings { settings in\n                guard settings.authorizationStatus == .authorized else {\n                    return\n                }\n                DispatchQueue.main.async {\n                    UIApplication.shared.registerForRemoteNotifications()\n                }\n            }\n}\n"})})]}),"\n",(0,o.jsx)(e.h2,{id:"\u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0430-\u043F\u0443\u0448\u0435\u0439",children:"\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043F\u0443\u0448\u0435\u0439"}),"\n",(0,o.jsx)(e.p,{children:"\u0414\u043B\u044F \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u043F\u0435\u0440\u0435\u0445\u043E\u0434 \u043F\u043E \u043F\u0443\u0448\u0443 \u0432 \u0447\u0430\u0442), \u043C\u043E\u0436\u0435\u0442 \u043F\u043E\u0442\u0440\u0435\u0431\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u043C\u0435\u0442\u043E\u0434 \u0434\u043B\u044F \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u0438\u043D\u0430\u0434\u043B\u0435\u0436\u043D\u043E\u0441\u0442\u0438 \u043F\u0443\u0448\u0430 \u043A ChatCenter:"}),"\n",(0,o.jsx)(e.h4,{id:"static-func-ischatcenternotification_-userinfo-string-any---bool",children:(0,o.jsx)(e.code,{children:"static func isChatCenterNotification(_ userInfo: [String: Any]) -> Bool"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B:"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"userInfo"}),": \u0421\u043B\u043E\u0432\u0430\u0440\u044C \u0441 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0435\u0439 \u043E Push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0438 \u043E\u0442 APNS."]}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442:"})," ",(0,o.jsx)(e.code,{children:"Bool"})," - ",(0,o.jsx)(e.code,{children:"true"}),", \u0435\u0441\u043B\u0438 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u043E\u0442\u043D\u043E\u0441\u0438\u0442\u0441\u044F \u043A ChatCenterUI SDK, \u0438\u043D\u0430\u0447\u0435 ",(0,o.jsx)(e.code,{children:"false"}),"."]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u041F\u0440\u0438\u043C\u0435\u0440 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F:"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-swift",children:"func application(_ application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : Any], fetchCompletionHandler completionHandler: @escaping (UIBackgroundFetchResult) -> Void) {\n    if ChatCenterUISDK.isChatCenterNotification(userInfo as! [String : Any]) {\n        // \u042D\u0442\u043E \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u043E\u0442 ChatCenterUI SDK, \u043E\u0431\u0440\u0430\u0431\u0430\u0442\u044B\u0432\u0430\u0435\u043C \u0435\u0433\u043E\n        // ...\n    } else {\n        // \u042D\u0442\u043E \u0434\u0440\u0443\u0433\u043E\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435\n        // ...\n    }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u043F\u0435\u0440\u0435\u0445\u043E\u0434-\u043F\u043E-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044E",children:"\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u043F\u043E \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044E"}),"\n",(0,o.jsx)(e.p,{children:"\u0414\u043B\u044F \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u044F \u0432 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0447\u0430\u0442\u0430 \u043F\u043E \u0441 \u0446\u0438\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435\u043C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E \u043F\u0443\u0448 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F (\u0438\u043B\u0438 \u0435\u0433\u043E \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0432 \u0443\u0436\u0435 \u043E\u0442\u043A\u0440\u044B\u0442\u043E\u043C), \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u044B\u0437\u0432\u0430\u0442\u044C \u043C\u0435\u0442\u043E\u0434:"}),"\n",(0,o.jsx)(e.h4,{id:"func-handlenotificationuserinfo-string-any-throws",children:(0,o.jsx)(e.code,{children:"func handleNotification(userInfo: [String: Any]) throws"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B:"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"userInfo"}),": \u0421\u043B\u043E\u0432\u0430\u0440\u044C \u0441 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0435\u0439 \u043E Push-\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0438."]}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\u0412\u044B\u0431\u0440\u0430\u0441\u044B\u0432\u0430\u0435\u0442:"})," \u041E\u0448\u0438\u0431\u043A\u0438, \u0435\u0441\u043B\u0438 \u043F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0430 \u043F\u0440\u0438 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F."]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u041F\u0440\u0438\u043C\u0435\u0440 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F:"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-swift",children:'func application(_ application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : Any], fetchCompletionHandler completionHandler: @escaping (UIBackgroundFetchResult) -> Void) {\n    // \u041F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C, \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043B\u0438 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u043E\u0442 ChatCenterUI SDK\n    if ChatCenterUISDK.isChatCenterNotification(userInfo) {\n        do {\n            try chatCenterSDK?.handleNotification(userInfo: userInfo as! [String : Any])\n            completionHandler(.newData)\n        } catch {\n            print("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F: \\(error)")\n            completionHandler(.failed)\n        }\n    } else {\n        // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0440\u0443\u0433\u0438\u0445 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439\n        completionHandler(.noData)\n    }\n}\n'})})]})}function h(n={}){let{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},50065:function(n,e,i){i.d(e,{Z:()=>a,a:()=>s});var t=i(67294);let o={},r=t.createContext(o);function s(n){let e=t.useContext(r);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);